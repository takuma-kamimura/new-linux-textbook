# シェルとコマンド

### まずはdataというコマンドを実行してみる
```
[user@localhost~]$ data
2014年　8月　30日　土曜日　18:35:23 JST
```
上記のように日時が表示される
なぜならdataという日時を扱うコマンドの実行結果が出力されるため。

- echoというコマンドも試してみる
```
[user@localhost~]$ echo Hello
Hello
```
コマンドの後ろに指定した文字列を表示することができるコマンドである。

Linuxにはこのように多くのコマンドが存在する。
約何百個。
全て覚える必要はないが、一つ一つの単純なコマンドを組み合わせることにより複雑な仕事を簡単にこなせるようになる。

### エラーについて
存在しないコマンドを打つとエラーとなる

```
[user@localhost~]$ abcxyz
-bash: abcxyz: command not found
```
エラーメッセージは全て英語で出てくるがよく読んで理解して対処を行うこと

### シェルの役割とLinuxカーネル

仮にdataというLinuxコマンドを打つとLinuxの中では
①キーボードから入力されたdataという文字列を受け取る
②dataというコマンドを探す
③見つかったコマンドを実行する
④実行した結果として得られた日時の文字列を画面に表示する

③のコマンドを実行する部分はLinux本体であるLinuxカーネルが行う

そもそもLiunxカーネルは人間が直接操作できない。
「入出力を指定する」「コマンドを実行する」というインターフェイスを持つソフトウェアが必要になってくる。
そして「シェル」とはカーネルのインターフェイスとなっているソフトウェアのこと

「シェル」はdataというコマンドを受け取って「dataというコマンドを実行せよ」という指示だと解釈する
そしてシェルはdataという文字列が示すコマンドを(user/bin/date)探し出し,そのコマンドを指定してLinuxカーネルに実行を依頼する。
そしてLinuxカーネルが実行を終了するとシェルはその結果を受け取って画面に表示する

-　なぜカーネルとシェルは分かれているのか
- linuxカーネルには手を加えずに、シェルだけ自分好みにカスタムできる
- Linux以外のOSを利用する際に、シェルが移植されていれば同様の操作を行うことができる
- シェルが高負荷でクラッシュやエラーになったとしても、OS本体のLinuxカーネルには最小限の影響で済ませることができる

機能ごとにプログラムを分けておくことが重要

# プロンプト

以下はシェルが表示しているプロンプト
```
[user@localhost~]$
ユーザー名 $ ホスト名
```

### プロンプト

ubuntuでのプロンプトの表紙
```
user@localhost:~$
```

-　一般ユーザーの場合

```
$ <コマンド>

```

スーパーユーザーの場合のプロンプト
```
# <コマンド>
```

ちなみにログイン時に使うコマンドをログインシェルという
- ログインシェルの確認
```
$ echo $SHEEL
/bin/bash
```
/binというディレクトリにあるbashがログインシェル

### 対話型の操作とシェルスクリプト

- 対話型(インタラクティブ)操作とは
ユーザーがキーボードと画面を操作してシェルを操作する方法のこと

- 一連の操作の流れを記述したファイルをシェルスクリプトという
```
#!/bin/sh

today=$(data '+%d')

if [ "$today" -eq 20 ]; then
  echo '今日は20日です。月次〆操作を開始してください'
fi
```

このように、小さなコマンドを組み合わせて複雑な処理が行えるという、とても強力な機能。


### シェルの種類

ここは割愛する。歴史的な内容も入ってくるため

### どのシェルを選ぶか

bashがおすすめ！
なぜなら欠点が皆無であるのと
- Linuxでデフォルトでログインシェルとして使用されており利用する機会が多い
- 対話的な仕様でもシェルスクリプトの仕様でも機能が十分に備わっている
- shとの後方互換性を保つため依存のshでのシェルスクリプトを実行できる
- Linux以外にも、FreeBSD/Solarisなど多くの環境に移植されている
- 利用者が多く多くの書籍やwebから情報を集めやすい

### シェルを一時的に切り替える

シェルも一つのコマンドにすぎないので、使いたいシェルを指定すれば起動することができる

```
[user@localhost~]$ sh
sh-4.2$
```
これでプロンプトがsh-4.2に切り替わってshシェルが起動した

さらにここからbashを起動する

```
[user@localhost~]$
sh-4.2$ bash
[user@localhost~]$
```
元に戻ってきただけのように見えるがbash→sh→bashと重複で起動している状態となっている

ちなみに一時的に起動したシェルはログインシェルではなく、ただのシェルに過ぎないのでlogoutコマンドを実行するとエラーとなる

```
[user@localhost~]$ logout
ログインシェルではありません : 'exitを使用してください'
```

このような場合はexitコマンドで非ログインシェルを終了する。(exit2回)
ログインシェルは余程の理由がない限りは、そのままデフォルトのbashにしておくこと

### ターミナルとは
