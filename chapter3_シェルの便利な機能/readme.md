# コマンドラインの編集

### カーソルの移動

```
$ echo Hllo
```

Helloと打つはずが打ち間違えてしまった。
Hの後ろにeを追加したい。なので直す必要がある。
そのため、まずはカーソルを後ろへ戻す必要がある。
ここでは「Ctrl」+bキーを押す。(3回押す。するとHの後ろのhにカーソルが移動する)
そしてeを追加する。

```
$ echo Hello

```

これで正しいコマンドとなった。

### コントロールキーの使い方

- 行頭へのカーソル移動は、「Ctrl+a」
- 行末へのカーソル移動は、「Ctrl+e」

|コマンド|内容|
|---|---|
|Ctrl + b|後方に1文字移動|
|Ctrl + f|前方に1文字移動|
|Ctrl + a|行頭に移動|
|Ctrl + e|行末に移動|

### 単語単位でのカーソリ移動
|コマンド|内容|
|---|---|
|Meta + b|後方に単語一つ分移動|
|Meta + f|前方に単語一つ分移動|

一般的なPCにはMetaキーはない
なので「Alt」か「esc」キーで代用

### 文字の削除

|コマンド|内容|
|---|---|
|Backspace、またはCtrl + h|カーソル位置の後方に一文字削除|
|deleteキー、またはCtrl + d|カーソル位置の一文字削除|
|Ctrl + w|後方にスペース区切りで１単語分を削除|

### カットとヤンク

|コマンド|内容|
|---|---|
|Ctrl + k|カーソル位置から行末まで削除(カット)|
|Ctrl + u|カーソル位置から行頭まで削除（カット）|
|Ctrl + y|最後に削除した内容の挿入|

ペーストのことをヤンクという
カットした内容はペースト(ヤンク)できる

# トラブルの時には

### キーボードからの操作を一切受け付けない

|コマンド|内容|
|---|---|
|Ctrl + s|画面表示をロックする|
|Ctrl + q|画面ロックを解除する|

### コマンドが終了せず、プロンプト返ってこない

Linuxの一部のコマンドは明示的に終了操作をしない限り動き続ける仕組みのものもある。その場合は自分で終了操作をしなければならない。
その場合は「Ctrl + c」で実行中のコマンドを強制終了することができる。
例えば「ping」というネットワークの疎通を調べるコマンドを入力すると、1秒に1回永遠に調べ続けることになる。
その場合は「Ctrl + c」が役に立つ。
ちなみにシェル上では「Ctrl + c」を押した地点では「^キー」のように表現される。

あとコマンド入力中に間違いに気付いて最初から入力したい場合も「Ctrl + c」を押すことで、これまでの入力内容の破棄ができる。

### プロンプトが文字化けしている場合

画像などのバイナリファイルをシェル上で表示させた後、プロンプトが文字化けしている時がある。
その時は「Ctrl + l」で画面を消去できる。

|コマンド|内容|
|---|---|
|Ctrl + l|画面を消去する|

# 保管機能
長いコマンドを打つ時は保管機能が役に立つ。
bashの保管機能はTabキーを押すことで使用できる。

```
$ ec # ここでtabキーを押すと
$ echo # echoと自動表示される。
```

しかし保管候補が複数ある場合は
```
$ e # ベルがなるだけで何も起こらない
```

その場合は二度tabキーを押すと複数の候補が出てくる
```
$ e
e2freefrag      echo     era_invalidate
......
......
......
```

このようにいちいちコマンドを全て入力する必要はない

# コマンド履歴

コマンド履歴を使えば、以前入力したコマンドをコマンドライン上に呼び出せる

|コマンド|内容|
|---|---|
|Ctrl + p, または↑キー|一つ前のコマンド履歴を表示|
|Ctrl + n, または↓キー|次のコマンド履歴を表示|
|Ctrl + r|履歴を辿ってインクリメンタル検索を行う|

pはPrevious(前)、nはNEXT(次)と覚えると良い

例えば入力間違いを行い、履歴からコマンドを入力したい場合は「Ctrl + a」で行頭まで戻って「Ctrl + p」「Ctrl + n」を使えば良い。

### コマンド履歴の検索

たくさん履歴がある時は「Ctrl + r」が役にたつ。
「インクリメンタル検索モード」になる

「インクリメンタル検索モード」時のプロンプト
```
(reverse-i-search)':
```

１文字打つと補完される。例えば「e」と打つと
```
(reverse-i-search)`e': env
```

過去のコマンドを表示させ、打つことができる
```
(reverse-i-search)`ec': echo Hello
```

- 「インクリメンタル検索モード」時の操作方法
|コマンド|内容|
|---|---|
|Ctrl + r|一つ前の検索結果へ移動|
|エンターキー|現在の検索結果を実行|
|ESCキー|現在の検索結果を表示したままコマンドラインへ戻る|
|Ctrl + r|検索結果を破棄してコマンドラインへ戻る|